@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  /* 기본 폰트: Pretendard (한국어+영문 모두 지원) */
  --font-sans: "Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, "Helvetica Neue", Arial, sans-serif;

  /* 타이틀 폰트: Courier Prime (시나리오 대본 스타일) */
  --font-title: var(--font-courier-prime), "Courier New", Courier, monospace;

  /* Liquid Glass 블롭 애니메이션 */
  --animate-blob: blob 7s infinite;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
}

/*
 * 배경 블롭 애니메이션
 * Liquid Glass 디자인의 배경에 유기적인 움직임을 줍니다.
 */
@keyframes blob {
  0% {
    transform: translate(0, 0) scale(1);
  }
  33% {
    transform: translate(30px, -50px) scale(1.1);
  }
  66% {
    transform: translate(-20px, 20px) scale(0.9);
  }
  100% {
    transform: translate(0, 0) scale(1);
  }
}

/* 블롭 애니메이션 지연 유틸리티 */
.animation-delay-2000 {
  animation-delay: 2s;
}

.animation-delay-4000 {
  animation-delay: 4s;
}

/* ==============================================
 * TipTap 시나리오 에디터 스타일
 *
 * TipTap v3에서는 에디터 DOM에 `.tiptap` 클래스가
 * 자동 부여되지 않을 수 있으므로, 직접 지정한
 * `.scenario-editor-content` 또는 상위 `.scenario-editor`
 * 기준으로 셀렉터를 작성합니다.
 * ============================================== */

/* 에디터 본문 영역 (editorProps.attributes.class 로 지정) */
.scenario-editor-content {
  outline: none;
  display: flow-root;
  font-family: var(--font-courier-prime), "Courier Prime", "Courier New", Courier, monospace;
  font-size: 16px;
  line-height: 1;
  letter-spacing: 0;
  color: #000000;
  box-sizing: border-box;
  /* 씬 헤딩 자동 넘버링 카운터 초기화 */
  counter-reset: scene-counter;
}

/* Placeholder (빈 상태일 때 안내 텍스트) */
.scenario-editor p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: #adb5bd;
  pointer-events: none;
  height: 0;
}

/* 제목 스타일 */
.scenario-editor h1 {
  font-family: var(--font-courier-prime), "Courier Prime", "Courier New", Courier, monospace;
  font-size: 1.5rem;
  font-weight: 400;
  margin-top: 2rem;
  margin-bottom: 0.5rem;
}

.scenario-editor h2 {
  font-family: var(--font-courier-prime), "Courier Prime", "Courier New", Courier, monospace;
  font-size: 1.25rem;
  font-weight: 400;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
}

.scenario-editor h3 {
  font-family: var(--font-courier-prime), "Courier Prime", "Courier New", Courier, monospace;
  font-size: 1.125rem;
  font-weight: 400;
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
}

/* 굵게/기울임 */
.scenario-editor strong {
  font-weight: 400 !important;
}

.scenario-editor b {
  font-weight: 400 !important;
}

.scenario-editor em {
  font-style: normal !important;
}

.scenario-editor i {
  font-style: normal !important;
}

.scenario-editor [style*="font-weight"] {
  font-weight: 400 !important;
}

.scenario-editor [style*="font-style"] {
  font-style: normal !important;
}

/* 리스트 */
.scenario-editor ul {
  list-style: disc;
  padding-left: 1.5rem;
  margin-bottom: 0.5rem;
}

.scenario-editor ol {
  list-style: decimal;
  padding-left: 1.5rem;
  margin-bottom: 0.5rem;
}

.scenario-editor li {
  margin-bottom: 0.25rem;
}

/* ==============================================
 * 시나리오 전용 노드 스타일
 *
 * "미국" 포맷 (US Screenplay Format)
 * A4 표준 8.27×11.69인치(794×1122px @ 96dpi) 기준, 1인치 = 96px
 *
 * 여백은 용지 기준 절대값이며,
 * 용지 내부 좌우 패딩 없이 노드별로 개별 관리합니다.
 * ============================================== */

/* ── 공통: 일반 (paragraph) ──
 * 좌 1.5" (144px), 우 1" (96px) */
.scenario-editor p {
  margin-top: 0;
  margin-bottom: 0;
  padding-left: 144px;
  padding-right: 96px;
  font-size: 16px;
  line-height: 1;
  letter-spacing: 0;
  color: #000000;
}

/* ── 씬 헤딩 ──
 * 좌 1.5" (144px), 우 1" (96px)
 * 넘버링은 좌 1" (96px)에 absolute 배치 */
.scenario-editor .scene-heading {
  position: relative;
  font-family: var(--font-courier-prime), "Courier Prime", "Courier New", Courier, monospace;
  font-weight: 400;
  font-size: 16px;
  text-transform: uppercase;
  letter-spacing: 0;
  line-height: 1;
  margin-top: 2em;
  margin-bottom: 0;
  padding-left: 144px;
  padding-right: 96px;
  counter-increment: scene-counter;
  color: #000000;
}

/* 첫 번째 요소 상단 마진 초기화 (scene-heading은 예외) */
.scenario-editor-content > :first-child:not(.scene-heading) {
  margin-top: 0;
}

.scenario-editor .scene-heading::before {
  content: counter(scene-counter) ".";
  position: absolute;
  left: 96px;
  font-family: var(--font-courier-prime), "Courier Prime", "Courier New", Courier, monospace;
  font-weight: 400;
}

/* ── 지문 (Action) ──
 * 좌 1.5" (144px), 우 1" (96px) */
.scenario-editor .action {
  margin-top: 1em;
  margin-bottom: 0;
  padding-left: 144px;
  padding-right: 96px;
  font-size: 16px;
  line-height: 1;
  letter-spacing: 0;
  color: #000000;
}

/* ── 등장인물 하이라이트 (네비게이터에서 인물 클릭 시) ── */
.scenario-editor .character-highlight {
  background-color: rgba(250, 204, 21, 0.35);
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

@media (prefers-color-scheme: dark) {
  .scenario-editor .character-highlight {
    background-color: rgba(234, 179, 8, 0.25);
  }
}

/* ── 등장인물 (Character) ──
 * 좌 3.7" (355px), 우 3.1" (298px) */
.scenario-editor .character {
  font-weight: 400;
  font-size: 16px;
  text-transform: uppercase;
  letter-spacing: 0;
  line-height: 1;
  margin-top: 1em;
  margin-bottom: 0;
  padding-left: 355px;
  padding-right: 298px;
  color: #000000;
}

/* ── 대사 (Dialogue) ──
 * 좌 2.5" (240px), 우 2" (192px) */
.scenario-editor .dialogue {
  margin-top: 0em;
  margin-bottom: 0;
  padding-left: 240px;
  padding-right: 192px;
  font-size: 16px;
  line-height: 1;
  letter-spacing: 0;
  color: #000000;
}

/* ── 괄호지시 (Parenthetical) ──
 * 좌 3.1" (298px), 우 2.6" (250px) */
.scenario-editor .parenthetical {
  font-style: normal;
  font-size: 16px;
  line-height: 1;
  letter-spacing: 0;
  margin-top: 0em;
  margin-bottom: 0;
  padding-left: 298px;
  padding-right: 250px;
  color: #000000;
}

/* ── 전환 (Transition) ──
 * 좌 1.5" (144px), 우 1" (96px), 우측 정렬 */
.scenario-editor .transition-block {
  font-family: var(--font-courier-prime), "Courier Prime", "Courier New", Courier, monospace;
  font-weight: 400;
  font-size: 16px;
  text-align: right;
  text-transform: uppercase;
  letter-spacing: 0;
  line-height: 1;
  margin-top: 1em;
  margin-bottom: 0;
  padding-left: 144px;
  padding-right: 96px;
  color: #000000;
}

/* ==============================================
 * Document 에디터 스타일
 * ============================================== */
.document-editor-content {
  outline: none;
  min-height: 930px;
  color: var(--foreground);
  line-height: 1.8;
  letter-spacing: 0.01em;
  word-break: keep-all;
}

.document-editor-content:focus,
.document-editor-content:focus-visible {
  outline: none;
  box-shadow: none;
}

.document-editor .ProseMirror:focus {
  outline: none;
}

.document-editor .ProseMirror-selectednode {
  outline: none !important;
}

.document-editor-content p {
  margin-bottom: 0.9rem;
}

.document-editor-content h1 {
  font-size: 2rem;
  line-height: 1.3;
  font-weight: 700;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

.document-editor-content h2 {
  font-size: 1.5rem;
  line-height: 1.4;
  font-weight: 700;
  margin-top: 1.25rem;
  margin-bottom: 0.6rem;
}

.document-editor-content h3 {
  font-size: 1.2rem;
  line-height: 1.5;
  font-weight: 600;
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

.document-editor-content ul,
.document-editor-content ol {
  margin-bottom: 0.9rem;
  padding-left: 1.5rem;
}

.document-editor-content ul {
  list-style: disc;
}

.document-editor-content ol {
  list-style: decimal;
}

.document-editor-content ul[data-type="taskList"] {
  list-style: none;
  padding-left: 0.5rem;
}

.document-editor-content li[data-type="taskItem"] {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
}

.document-editor-content li[data-type="taskItem"] > label {
  margin-top: 0.35rem;
  display: inline-flex;
}

.document-editor-content li[data-type="taskItem"] > div {
  flex: 1;
}

.document-editor-content li[data-type="taskItem"] > label input[type="checkbox"] {
  accent-color: #2563eb;
}

.document-editor-content mark {
  padding: 0 0.08em;
  border-radius: 0.15em;
}

.document-editor-content a {
  color: #2563eb;
  text-decoration: underline;
}

.document-editor-content img {
  display: block;
  max-width: 100%;
  height: auto;
  margin: 1rem auto;
  border-radius: 0.5rem;
}

.document-editor-content .doc-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  margin: 1rem 0;
}

.document-editor-content .doc-table td,
.document-editor-content .doc-table th {
  border: 1px solid #d4d4d8;
  padding: 0.5rem 0.625rem;
  vertical-align: top;
  background: #fff;
  min-height: 44px;
}

.document-editor-content .doc-table th {
  background: #f4f4f5;
  font-weight: 600;
}

.document-editor-content .doc-table td p,
.document-editor-content .doc-table th p {
  margin-bottom: 0;
}

@media (prefers-color-scheme: dark) {
  .document-editor-content a {
    color: #60a5fa;
  }

  .document-editor-content .doc-table td,
  .document-editor-content .doc-table th {
    border-color: rgba(255, 255, 255, 0.14);
    background: #18181b;
  }

  .document-editor-content .doc-table th {
    background: #27272a;
  }
}

.document-editor p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: #adb5bd;
  pointer-events: none;
  height: 0;
}
